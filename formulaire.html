<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulaire de Préinscription Universitaire</title>

  <!-- Feuilles de style -->
  <link rel="stylesheet" href="assets/css/fontawesome.css" />
  <link rel="stylesheet" href="assets/css/owl.css" />
  <link rel="stylesheet" href="assets/css/lightbox.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body::before {
      content: "";
      background: url('assets/images/banner-bg.jpg') no-repeat center center/cover;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      filter: blur(5px) brightness(0.6);
    }

    .register-section {
      background-color: rgba(255, 255, 255, 0.92);
      padding: 50px;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.2);
      margin-bottom: 50px;
    }

    .page-header {
      background: linear-gradient(to right, #7a0000, #0059b3);
      color: white;
      padding: 40px 20px;
      border-radius: 10px;
      margin-bottom: 40px;
      text-align: center;
    }

    .steps-indicator {
      display: flex;
      justify-content: space-between;
      background-color: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }

    .steps-indicator .step {
      text-align: center;
      flex: 1;
      color: #999;
    }

    .steps-indicator .step.active {
      font-weight: bold;
      color: #7a0000;
    }

    .form-section {
      display: none;
    }

    .form-section.active {
      display: block;
    }

    .form-title {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #7a0000;
    }

    .form-group label {
      font-weight: 500;
    }

    .progress {
      height: 20px;
      margin-bottom: 30px;
      background-color: #f2f2f2;
    }

    .progress-bar {
      font-weight: bold;
      font-size: 0.9rem;
    }
  </style>
</head>

<body>
  <div class="container mt-5">
    <div class="page-header">
      <h2>Formulaire de Préinscription Universitaire</h2>
      <p>Veuillez remplir toutes les informations demandées pour toutes les universités de Kinshasa</p>
    </div>

    <div class="steps-indicator">
      <div class="step active">1. Infos personnelles</div>
      <div class="step">2. Documents</div>
      <div class="step">3. Validation</div>
    </div>

    <div class="progress">
      <div class="progress-bar bg-danger" style="width: 33%;">33%</div>
    </div>

    <div class="register-section">
      <form id="form-preinscription" action="traitement.php" method="post" enctype="multipart/form-data">

        <!-- Étape 1 : Infos personnelles & académiques -->
        <div class="form-section active" id="step-1">
          <div class="form-title">Informations personnelles & académiques</div>
          <div class="row">
            <div class="mb-3 col-md-6">
              <label for="nom" class="form-label">Nom complet</label>
              <input type="text" class="form-control" id="nom" name="nom" required />
            </div>
            <div class="mb-3 col-md-6">
              <label for="date_naissance" class="form-label">Date de naissance</label>
              <input type="date" class="form-control" id="date_naissance" name="date_naissance" required />
            </div>
          </div>

          <div class="row">
            <div class="mb-3 col-md-4">
              <label for="sexe" class="form-label">Sexe</label>
              <select class="form-select" id="sexe" name="sexe" required>
                <option value="">-- Choisissez --</option>
                <option value="M">Masculin</option>
                <option value="F">Féminin</option>
              </select>
            </div>
            <div class="mb-3 col-md-4">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" name="email" required />
            </div>
            <div class="mb-3 col-md-4">
              <label for="telephone" class="form-label">Téléphone</label>
              <input type="tel" class="form-control" id="telephone" name="telephone" required />
            </div>
          </div>

          <!-- Partie Pays / Ville -->
          <div class="row">
            <div class="mb-3 col-md-4">
              <label for="pays" class="form-label">Pays</label>
              <select class="form-select" id="pays" name="pays" required>
                <option value="">-- Choisissez un pays --</option>
                <option value="RDC">République Démocratique du Congo</option>
                <option value="Angola">Angola</option>
                <option value="Burundi">Burundi</option>
                <option value="Cameroun">Cameroun</option>
                <option value="Congo">Congo-Brazzaville</option>
                <option value="Egypte">Égypte</option>
                <option value="Ethiopie">Éthiopie</option>
                <option value="Gabon">Gabon</option>
                <option value="Ghana">Ghana</option>
                <option value="Kenya">Kenya</option>
                <option value="Madagascar">Madagascar</option>
                <option value="Maroc">Maroc</option>
                <option value="Mozambique">Mozambique</option>
                <option value="Nigeria">Nigeria</option>
                <option value="Rwanda">Rwanda</option>
                <option value="Sénégal">Sénégal</option>
                <option value="Tanzanie">Tanzanie</option>
                <option value="Tunisie">Tunisie</option>
                <option value="Ouganda">Ouganda</option>
                <option value="Zambie">Zambie</option>
                <option value="Zimbabwe">Zimbabwe</option>
                <!-- Ajoute d'autres pays d'Afrique si besoin -->
              </select>
            </div>

            <div class="mb-3 col-md-4">
              <label for="ville" class="form-label">Ville</label>
              <select class="form-select" id="ville" name="ville" required>
                <option value="">-- Choisissez un pays d'abord --</option>
              </select>
            </div>

            <div class="mb-3 col-md-4">
              <label for="quartier" class="form-label">Quartier</label>
              <input type="text" class="form-control" id="quartier" name="quartier" required />
            </div>
          </div>

          <div class="row">
            <div class="mb-3 col-md-6">
              <label for="universite" class="form-label">Université de destination</label>
              <select class="form-select" id="universite" name="universite" required>
                <option value="">-- Choisissez une université --</option>
                <option value="UNIKIN">UNIKIN – Université de Kinshasa</option>
                <option value="UPN">UPN – Université Pédagogique Nationale</option>
                <option value="ISC-Kin">ISC-Kin – Institut Supérieur de Commerce</option>
                <option value="ULK">ULK – Université Libre de Kinshasa</option>
                <option value="UCC">UCC – Université Catholique du Congo</option>
                <option value="ISP-Gombe">ISP-Gombe – Institut Supérieur Pédagogique de la Gombe</option>
                <option value="IFA-Yangambi-Kin">IFA-Yangambi/Kin – Institut Facultaire d’Agronomie</option>
                <option value="ISTA">ISTA – Institut Supérieur des Techniques Appliquées</option>
                <option value="LAU">LAU – Leadership Academia University</option>
                <option value="Autre">Autre</option>
              </select>
            </div>
            <div class="mb-3 col-md-6">
              <label for="filiere" class="form-label">Filière / Département</label>
              <select class="form-select" id="filiere" name="filiere" required>
                <option value="">-- Choisissez d'abord une université --</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="mb-3 col-md-6">
              <label for="type_piece" class="form-label">Type de pièce</label>
              <select class="form-select" id="type_piece" name="type_piece" required>
                <option value="">-- Choisissez --</option>
                <option value="carte">Carte d'identité</option>
                <option value="passeport">Passeport</option>
                <option value="autre">Autre</option>
              </select>
            </div>
            <div class="mb-3 col-md-6">
              <label for="numero_piece" class="form-label">Numéro de la pièce</label>
              <input type="text" class="form-control" id="numero_piece" name="numero_piece" required />
            </div>
          </div>

          <div class="row">
            <div class="mb-3 col-md-6">
              <label for="dernier_diplome" class="form-label">Dernier diplôme obtenu</label>
              <input type="text" class="form-control" id="dernier_diplome" name="dernier_diplome" required />
            </div>
            <div class="mb-3 col-md-6">
              <label for="profession" class="form-label">Profession actuelle (facultatif)</label>
              <input type="text" class="form-control" id="profession" name="profession" />
            </div>
          </div>

          <div class="alert alert-warning">
            <strong>Frais de préinscription :</strong> Vous devez payer 5$ à l'université lors de
            l'inscription physique. <br />
            <strong>Validité :</strong> Votre préinscription est valide pendant 7 jours.
          </div>

          <div class="text-end">
            <button type="button" class="btn btn-primary" onclick="nextStep()">Suivant</button>
          </div>
        </div>

        <!-- Étape 2 : Documents -->
        <div class="form-section" id="step-2">
          <div class="form-title">Documents à fournir</div>

          <div class="mb-3">
            <label for="photo_identite" class="form-label">Photo d'identité (jpg, png, max 2Mo)</label>
            <input type="file" class="form-control" id="photo_identite" name="photo_identite" accept=".jpg,.jpeg,.png" required />
          </div>

          <div class="mb-3">
            <label for="copie_piece" class="form-label">Copie de la pièce d'identité (pdf, jpg, png, max 5Mo)</label>
            <input type="file" class="form-control" id="copie_piece" name="copie_piece" accept=".pdf,.jpg,.jpeg,.png" required />
          </div>

          <div class="mb-3">
            <label for="releve_notes" class="form-label">Relevé de notes / Dernier diplôme (pdf, jpg, png, max 5Mo)</label>
            <input type="file" class="form-control" id="releve_notes" name="releve_notes" accept=".pdf,.jpg,.jpeg,.png" required />
          </div>

          <div class="mb-3">
            <label for="autres_documents" class="form-label">Autres documents (facultatif)</label>
            <input type="file" class="form-control" id="autres_documents" name="autres_documents[]" multiple accept=".pdf,.jpg,.jpeg,.png" />
            <small class="form-text text-muted">Vous pouvez uploader plusieurs fichiers</small>
          </div>

          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-secondary" onclick="prevStep()">Précédent</button>
            <button type="button" class="btn btn-primary" onclick="nextStep()">Suivant</button>
          </div>
        </div>

        <!-- Étape 3 : Validation -->
        <div class="form-section" id="step-3">
          <div class="form-title">Validation et confirmation</div>
          <p>Veuillez vérifier que toutes les informations saisies sont correctes avant de soumettre votre préinscription.</p>

          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-secondary" onclick="prevStep()">Précédent</button>
            <button type="submit" class="btn btn-success">Valider et Envoyer</button>
          </div>
        </div>

      </form>
    </div>
  </div>

  <script>
    let currentStep = 1;

    function showStep(step) {
      document.querySelectorAll(".form-section").forEach((section, index) => {
        section.classList.remove("active");
        if (index === step - 1) {
          section.classList.add("active");
        }
      });

      const progress = document.querySelector(".progress-bar");
      progress.style.width = step * 33.33 + "%";
      progress.textContent = Math.round(step * 33.33) + "%";

      document.querySelectorAll(".steps-indicator .step").forEach((s, i) => {
        s.classList.toggle("active", i === step - 1);
      });
    }

    function nextStep() {
      if (currentStep < 3) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        currentStep--;
        showStep(currentStep);
      }
    }

    // Données filières par université
    const filieresByUni = {
      "UNIKIN": [
        "Faculté des Sciences",
        "Faculté de Médecine",
        "Faculté de Droit",
        "Faculté des Lettres et Sciences Humaines",
        "Faculté d’Architecture",
        "Faculté d’Ingénierie",
        "Faculté d’Agronomie"
      ],
      "UPN": [
        "Sciences de l’Éducation",
        "Psychologie",
        "Sociologie",
        "Lettres Modernes",
        "Mathématiques",
        "Physique"
      ],
      "ISC-Kin": [
        "Gestion",
        "Comptabilité",
        "Marketing",
        "Finance",
        "Commerce International"
      ],
      "ULK": [
        "Droit",
        "Économie",
        "Sciences Politiques",
        "Informatique",
        "Administration des Affaires"
      ],
      "UCC": [
        "Théologie",
        "Philosophie",
        "Sciences Sociales",
        "Communication"
      ],
      "ISP-Gombe": [
        "Pédagogie Générale",
        "Sciences de l’Éducation",
        "Technologie Éducative"
      ],
      "IFA-Yangambi-Kin": [
        "Agronomie",
        "Foresterie",
        "Gestion des Ressources Naturelles"
      ],
      "ISTA": [
        "Techniques de Génie Civil",
        "Techniques Électriques",
        "Techniques Mécaniques",
        "Informatique Industrielle"
      ],
      "LAU": [
        "Administration des Affaires",
        "Gestion de Projet",
        "Informatique de Gestion",
        "Marketing",
        "Relations Internationales",
        "Théologie"
      ]
    };

    const universiteSelect = document.getElementById("universite");
    const filiereSelect = document.getElementById("filiere");

    universiteSelect.addEventListener("change", function () {
      const uni = this.value;
      filiereSelect.innerHTML = ""; // reset

      if (uni === "" || uni === "Autre") {
        filiereSelect.innerHTML = '<option value="">-- Choisissez d\'abord une université valide --</option>';
        filiereSelect.disabled = uni === "";
        if (uni === "Autre") {
          filiereSelect.innerHTML = '<option value="Autre">Autre (Veuillez préciser)</option>';
          filiereSelect.disabled = false;
        }
        return;
      }

      const filieres = filieresByUni[uni];
      if (filieres) {
        filiereSelect.disabled = false;
        filiereSelect.innerHTML = '<option value="">-- Choisissez une filière --</option>';
        filieres.forEach((filiere) => {
          const option = document.createElement("option");
          option.value = filiere;
          option.textContent = filiere;
          filiereSelect.appendChild(option);
        });
      } else {
        filiereSelect.innerHTML = '<option value="">Aucune filière trouvée</option>';
        filiereSelect.disabled = true;
      }
    });

    // Liste simplifiée des villes par pays
    const villesParPays = {
      "RDC": ["Kinshasa", "Lubumbashi", "Mbuji-Mayi", "Goma", "Kisangani"],
      "Angola": ["Luanda", "Huambo", "Benguela"],
      "Burundi": ["Bujumbura", "Gitega"],
      "Cameroun": ["Yaoundé", "Douala", "Garoua"],
      "Congo": ["Brazzaville", "Pointe-Noire"],
      "Egypte": ["Le Caire", "Alexandrie", "Gizeh"],
      "Ethiopie": ["Addis-Abeba", "Mekelle", "Gondar"],
      "Gabon": ["Libreville", "Port-Gentil"],
      "Ghana": ["Accra", "Kumasi"],
      "Kenya": ["Nairobi", "Mombasa"],
      "Madagascar": ["Antananarivo", "Toamasina"],
      "Maroc": ["Rabat", "Casablanca", "Marrakech"],
      "Mozambique": ["Maputo", "Beira"],
      "Nigeria": ["Lagos", "Abuja", "Kano"],
      "Rwanda": ["Kigali", "Butare"],
      "Sénégal": ["Dakar", "Thiès"],
      "Tanzanie": ["Dodoma", "Dar es Salaam"],
      "Tunisie": ["Tunis", "Sfax"],
      "Ouganda": ["Kampala", "Entebbe"],
      "Zambie": ["Lusaka", "Ndola"],
      "Zimbabwe": ["Harare", "Bulawayo"]
    };

    const paysSelect = document.getElementById("pays");
    const villeSelect = document.getElementById("ville");

    paysSelect.addEventListener("change", function () {
      const pays = this.value;
      villeSelect.innerHTML = ""; // reset
      if (!pays || !villesParPays[pays]) {
        villeSelect.innerHTML = '<option value="">-- Choisissez un pays d\'abord --</option>';
        villeSelect.disabled = true;
        return;
      }

      villeSelect.disabled = false;
      villeSelect.innerHTML = '<option value="">-- Choisissez une ville --</option>';
      villesParPays[pays].forEach((ville) => {
        const option = document.createElement("option");
        option.value = ville;
        option.textContent = ville;
        villeSelect.appendChild(option);
      });
    });

    document.addEventListener("DOMContentLoaded", function () {
      showStep(currentStep);
      villeSelect.disabled = true; // Ville désactivée au départ
    });
  </script>
</body>

</html>
